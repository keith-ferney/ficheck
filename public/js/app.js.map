{"version":3,"sources":["app.js","budget-view.js","financial-goals.js","financial-ratios.js","financial-sections.js","monthly-budget.js","monthly-tracking.js","retirement-needs/annual-savings-required.js","retirement-needs/future-savings-investments.js","retirement-needs/retirement-goal.js","retirement-needs/savings-investments.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["// remove fields or add datepicker (mm/dd/yyyy) - jquery UI\n// monthly tracking hide categories link\n// delete button on right side of category field (removes row)\n// reset button on monthly tracker, with are you sure dialog\n// stage for george\n","(function($){\n  $(function(){\n\n    var planned = \"planned\";\n    var actual = \"actual\";\n    var difference = \"difference\";\n    var active = \"active\";\n\n    var activeClass = \"planned\";\n\n    sumSections();\n\n    //loop through all sections and sum\n    function sumSections()\n    {\n      var sections = $(\".monthly-budget-type\");\n      $.each(sections, function(index, section){\n        $.each($(section).find(\".valueType\"), function(index, element){\n          sumTotal($(element));\n        })\n      });\n    }\n\n    //determine whether an element is planned actual or difference\n    function getType (element)\n    {\n      if($(element).hasClass(planned))\n      {\n        return planned;\n      }\n      else if($(element).hasClass(actual))\n      {\n        return actual;\n      }\n      else if($(element).hasClass(difference))\n      {\n        return difference;\n      }\n    }\n\n    // Toggle Planned actual and active inputs\n    $(\".budget-view\").on(\"click\", \".toggleBudgetInputs\", function(){\n\n      $(\".valueType, .valueTypeTotal, .toggleBudgetInputs\").removeClass(active);\n\n      $(this).removeClass(\"toggleBudgetInputs\");\n      activeClass = $(this).attr(\"class\");\n      $(this).addClass(\"toggleBudgetInputs\");\n\n      var type = getType(this);\n\n      $(\".valueType.\" + type + \", .valueTypeTotal.\" + type + \", .toggleBudgetInputs.\" + type).addClass(active);\n\n    });\n\n    //on input change of planned or actual update the value of difference\n    $(\".budget-view\").on(\"change\", \".valueInput\", function(){\n      //get the record id of the changed input's parent row\n      var row = $(this).parents(\".valueType\");\n      var recordId = $(row).attr(\"data-record-id\");\n\n      //get planned, actual and difference rows\n      var plannedRow = $(\".budget-view .\" + planned + \".valueType[data-record-id='\" + recordId + \"']\");\n      var actualRow = $(\".budget-view .\" + actual + \".valueType[data-record-id='\" + recordId + \"']\");\n      var differenceRow = $(\".budget-view .\" + difference + \".valueType[data-record-id='\" + recordId + \"']\");\n\n      //get planned and actual values\n      var plannedValue = plannedRow.find(\"input\").val();\n      var actualValue = actualRow.find(\"input\").val();\n\n      //update difference value based on planned and actual values\n      differenceRow.find(\"input\").val(plannedValue - actualValue);\n\n      sumTotal(row);\n      sumTotal(differenceRow);\n    });\n\n    //function to sum total for a type\n    function sumTotal(element)\n    {\n      var type = getType (element);\n      var monthlyBudgetType = element.parents(\".monthly-budget-type\");\n\n      var inputsToUpdate = monthlyBudgetType.find(\".valueType.\" + type);\n\n      var total = 0;\n\n      $.each(inputsToUpdate, function(index, input){\n        var inputTotal = Number($(input).find(\".valueInput\").val());\n        total += inputTotal;\n      });\n\n      var totalInput = monthlyBudgetType.find(\".\" + type + \" .totalInput\");\n\n      totalInput.val(total.toFixed(2));\n    }\n\n    //editable labels\n    $(\".budget-view\").on(\"click\", \".editLabel\", function(){\n      var inputId = $(this).attr(\"input-id\");\n      var recordId = $(this).attr(\"record-id\");\n      var editableContainer = $(this).closest(\".editable\");\n      var value = editableContainer.find(\"label[for='\" + inputId + \"']\").text().trim();\n      $(this).text() == \"Edit\" ? $(this).text(\"Finished Editing\") : $(this).text(\"Edit\");\n\n      if (editableContainer.find(\"input\").length) {\n        editableContainer.find(\"input\").toggle();\n        editableContainer.find(\"label\").toggle();\n        editableContainer.find(\"label\").text(editableContainer.find(\"input\").val());\n      }\n      else\n      {\n        editableContainer.append(\"<input type='text' name='names[\" + recordId + \"]' value='\" + value + \"' class='form-control'>\");\n        editableContainer.find(\"label\").hide();\n      }\n\n    });\n\n    //Add new field\n    var newInputCount = 0;\n    $(\".budget-view\").on(\"click\", \".newItem\", function(event){\n       event.preventDefault()\n       //Set up Planned row\n       var planned = $(this).closest(\".monthly-budget-type\").find(\".valueTypeTemplate\").clone();\n       var recordId =  \"new_\" + newInputCount;\n       var inputId = \"new_\" + 0;\n       planned.attr(\"data-record-id\", recordId);\n       planned.find(\"label\").attr(\"for\", \"value_\" + inputId);\n       planned.find(\"button\").attr(\"record-id\", recordId);\n       planned.find(\"button\").attr(\"input-id\", \"value_\" + inputId);\n       planned.find(\"input\").attr(\"id\", \"value_\" + inputId);\n       planned.find(\"input\").attr(\"name\", \"newValues[\" + recordId + \"][\" + inputId + \"]\");\n       planned.addClass(\"planned\");\n       planned.removeClass(\"valueTypeTemplate\");\n       $(this).before(planned);\n\n       //Set up actual Row\n       var actual = $(this).closest(\".monthly-budget-type\").find(\".valueTypeTemplate\").clone();\n       inputId = \"new_\" + 1;\n       actual.addClass(\"actual\");\n       actual.removeClass(\"valueTypeTemplate\");\n       actual.attr(\"data-record-id\", recordId);\n       actual.find(\"label\").attr(\"for\", \"value_\" + inputId);\n       actual.find(\"button\").attr(\"record-id\", recordId);\n       actual.find(\"button\").attr(\"input-id\", \"value_\" + inputId);\n       actual.find(\"input\").attr(\"id\", \"value_\" + inputId);\n       actual.find(\"input\").attr(\"name\", \"newValues[\" + recordId + \"][\" + inputId + \"]\");\n       $(this).before(actual);\n\n       //Set up difference row\n       var difference = $(this).closest(\".monthly-budget-type\").find(\".valueTypeTemplate\").clone();\n       inputId = \"new_\" + 2;\n       difference.addClass(\"difference\");\n       difference.removeClass(\"valueTypeTemplate\");\n       difference.attr(\"data-record-id\", recordId);\n       difference.find(\"label\").attr(\"for\", \"value_\" + inputId);\n       difference.find(\"button\").attr(\"record-id\", recordId);\n       difference.find(\"button\").attr(\"input-id\", \"value_\" + inputId);\n       difference.find(\"input\").attr(\"id\", \"value_\" + inputId);\n       difference.find(\"input\").attr(\"name\", \"newValues[\" + recordId + \"][\" + inputId + \"]\");\n       difference.find(\"input\").attr(\"readonly\", \"readonly\");\n       $(this).before(difference);\n\n       //add active to active class\n       $(\".valueType.\" + activeClass).addClass(active);\n       var newRow = $(\".valueType.\" + activeClass + \"[data-record-id='\" + recordId + \"']\");\n       newRow.find(\"input\").focus();\n       newRow.show();\n\n      newInputCount++;\n    });\n\n    //hide empty fields\n    $(\".budget-view\").on(\"click\", \".hide-empty-fields\", function(){\n      event.preventDefault()\n\n      var rows = $(this).closest(\".monthly-budget-type\").find(\".valueType\");\n      $.each(rows, function(index, row) {\n        var rowVal = $(row).find(\"input\").val();\n        if(rowVal == \"\" || rowVal == 0)\n        {\n          $(row).hide();\n        }\n      })\n    });\n\n    //show all fields\n    $(\".budget-view\").on(\"click\", \".show-all-fields\", function(){\n      event.preventDefault()\n\n      var rows = $(this).closest(\".monthly-budget-type\").find(\".valueType.\" + activeClass).show();\n\n    })\n\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    // store the financialGoalsContainer\n    var financialGoalsContainer = $('.financial-goals');\n\n    // handler for the add tracking record control\n    financialGoalsContainer.on('click', 'a[href=#add]', function(e){\n      var goalWrapper = $(this).closest('.financial-goal-type');\n      var goals = goalWrapper.find('.body').last();\n      var template = goalWrapper.find('.template');\n      var newRecord = template.find('form').clone();\n\n      if(!goals.length) {\n        console.log('no goals for you');\n        goals = $('<div class=\"body\"/>');\n        template.before(goals);\n      }\n\n      newRecord.addClass('new');\n\n      goals.append(newRecord);\n\n      newRecord.find('input:visible').first().trigger('focus');\n\n      $(this).remove();\n\n      return false;\n    });\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    // store the financialGoalsContainer\n    var financialRatiosContainer = $('.financial-ratios');\n\n    $('.ficheck-section-type', financialRatiosContainer).on('change', 'input', function() {\n      var wrapper = $(this).closest('.ficheck-section-type');\n      var asset = wrapper.find('[name=asset]');\n      var liability = wrapper.find('[name=liability]');\n      var ratio = wrapper.find('[name=ratio]');\n      var result;\n\n      if(asset.val() && liability.val()) {\n        if(wrapper.hasClass('financial-ratio-type-basic-liquidity')) {\n          result = asset.val() / liability.val();\n        } else if(wrapper.hasClass('financial-ratio-type-debt-to-asset')) {\n          result = liability.val() / asset.val();\n        } else if(wrapper.hasClass('financial-ratio-type-debt-payment-to-income')) {\n          result = liability.val() / asset.val();\n        }\n      }\n\n      if(result) {\n        result = Math.round(result * 100) / 100;\n        ratio.val(result);\n      }\n    });\n\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    var ficheckSections = $('.ficheck-sections');\n\n    ficheckSections.on('click', 'a[href=#expand]', function(e){\n      $('.body,[href=#add]', ficheckSections).slideDown();\n\n      return false;\n    });\n\n    ficheckSections.on('click', 'a[href=#collapse]', function(e){\n      $('.body,[href=#add]', ficheckSections).slideUp();\n\n      return false;\n    });\n\n    ficheckSections.on('click', 'h2', function(e){\n      $('.body,[href=#add]', $(this).closest('.ficheck-section-type')).slideToggle();\n\n      return false;\n    });\n\n    var helpControls = $('.help-controls', ficheckSections).on('click', 'a', function(){\n      var ratioElement = $(this).closest('.financial-section-type');\n      var row = $(this).closest('.row');\n      var description = row.find('.description')\n\n      $('.help-controls .hide', row).removeClass('hide');\n      $(this).addClass('hide');\n\n      if($(this).attr('href').search('show')>=0) {\n        description.show();\n      } else {\n        description.hide();\n      }\n\n      return false;\n    });\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    \n  });\n}(jQuery));\n","(function($){\n  // store the monthlyTrackingContainer\n  var monthlyTrackingContainer = $('.monthly-tracking')\n\n  // handler for the add tracking record control\n  // monthlyTrackingContainer.on('click', 'button.add', function(e){\n  //   var currentRecord = $(this).closest('form');\n  //   var newRecord = currentRecord.clone();\n  //\n  //   $(':input', newRecord).val('').removeAttr('disabled').closest('form').removeClass('changed');\n  //\n  //   currentRecord.after(newRecord);\n  //\n  //   newRecord.find('input:visible').first().trigger('focus');\n  //\n  //   return false;\n  // });\n\n  // disable in/out if other if filled in  (only one or the other should be active)\n  monthlyTrackingContainer.on('change', '[name=in],[name=out]', function(){\n    var form = $(this).closest('form');\n\n    var sibling = form.find('[name=in],[name=out]').not(this);\n\n    if($(this).val()) {\n      sibling.attr('disabled', true);\n    } else {\n      sibling.removeAttr('disabled');\n    }\n  }).find('[name=in],[name=out]').trigger('change');\n\n  // if an input changes and the form is valid, submit it via ajax\n  monthlyTrackingContainer.on('change', '.row:not(.new) input', function(){\n    var form = $(this).closest('form');\n\n    var changed = false;\n    $('input', form).each(function(){\n        changed = this.value != this.defaultValue;\n\n        return !changed; // return if at least one control has changed value\n    });\n\n    if(changed) {\n      form.addClass('changed');\n    }\n\n    if(form.hasClass('changed') && form.find('[name=date]').val() && (form.find('[name=in]').val() || form.find('[name=out]').val())) {\n      var form = $(this).closest('form');\n      var data = form.serialize();\n\n      $.ajax({\n        url: form.action,\n        data: data,\n        method: \"post\",\n        success: function() {\n          form.removeClass('changed');\n\n          if(form.hasClass('new')) {\n            form.removeClass('new');\n          }\n        }\n      });\n    }\n  });\n\n  // track the active form (show controls via css)\n  monthlyTrackingContainer.on('focus', 'form input', function() {\n    monthlyTrackingContainer.find('form').removeClass('active');\n\n    $(this).closest('form').addClass('active');\n  });\n}(jQuery));\n","\n(function($){\n  $(function(){\n    var retirementGoals = $('.retirement-needs-type-annual-savings-required');\n\n    $(retirementGoals).on('change', 'input', function() {\n        var wrapper = $(this).closest('.ficheck-section-type');\n\n        var enteredretirementGoal = (wrapper.find('[name=entered_retirement_goal]').val() || 0) / 1;\n        var enteredFutureValueOfSavingsAndInvestments = (wrapper.find('[name=entered_future_value_of_savings_and_investments]').val() || 0) / 1;\n        var additionalSavingsNeededForRetirementElement = wrapper.find('[name=additional_savings_needed_for_retirement]');\n\n        console.log(additionalSavingsNeededForRetirementElement);\n\n        var additionalSavingsNeededForRetirement = enteredretirementGoal - enteredFutureValueOfSavingsAndInvestments;\n        additionalSavingsNeededForRetirementElement.val(additionalSavingsNeededForRetirement);\n\n        var factor = $('[name=\"entered_retirement_age_factor\"]', wrapper).val();\n        var goal = Math.round(additionalSavingsNeededForRetirement / factor * 100) / 100;\n\n        var additionAnnualSavingsRequired = $('[name=\"addition_annual_savings_required\"]', wrapper);\n        additionAnnualSavingsRequired.val(goal);\n    });\n\n    $(retirementGoals).on('change', 'select', function() {\n        var value = parseInt($(this).val(), 10);\n\n        var factor = $(':selected', this).data('factor') / 1;\n\n        var wrapper = $(this).closest('.row');\n        var factorElement = $('[name=\"entered_retirement_age_factor\"]', wrapper);\n\n        factorElement.val(factor).trigger('change');\n    });\n\n  });\n}(jQuery));\n","\n(function($){\n  $(function(){\n    var futureSavingsInvestments = $('.retirement-needs-type-future-savings-investments');\n\n    $(futureSavingsInvestments).on('change', 'input', function() {\n        var wrapper = $(this).closest('.ficheck-sections');\n        var currentValueSavingsAndInvestments = wrapper.find('[name=retirement_savings_and_investments]').val() / 1;\n\n        var factor = $('[name=\"retirement_years_factor\"]', wrapper).val();\n        var goal = Math.round(currentValueSavingsAndInvestments * factor * 100) / 100;\n\n        var futureValueSavingsAndInvestmentsElement = $('[name=\"future_value_of_savings_and_investments\"]', wrapper);\n        futureValueSavingsAndInvestmentsElement.val(goal);\n    });\n\n    $(futureSavingsInvestments).on('change', 'select', function() {\n        var factor = $(':selected', this).data('factor');\n\n        var wrapper = $(this).closest('.row');\n        var factorElement = $('[name=\"retirement_years_factor\"]', wrapper);\n\n        factorElement.val(factor).trigger('change');\n    });\n\n  });\n}(jQuery));\n","\n(function($){\n  $(function(){\n    var retirementGoals = $('.retirement-needs-type-retirement-goal');\n\n    $(retirementGoals).on('change', 'input', function() {\n        var wrapper = $(this).closest('.ficheck-section-type');\n\n        var annualIncome = (wrapper.find('[name=annual_income]').val() || 0) / 1;\n        var annualSsBenefit = (wrapper.find('[name=annual_ss_benefit]').val() || 0) / 1;\n        var annualEmployerBenefit = (wrapper.find('[name=annual_employer_benefit]').val() || 0) / 1;\n        var additionalAnnualIncomeRequiredElement = wrapper.find('[name=additional_annual_income_required]');\n\n        var additionalAnnualIncomeRequired = Math.round((annualIncome - annualSsBenefit - annualEmployerBenefit) * 100) / 100;\n        additionalAnnualIncomeRequiredElement.val(additionalAnnualIncomeRequired);\n\n        var factor = $('[name=\"retirement_age_factor\"]', wrapper).val();\n        var goal = Math.round(additionalAnnualIncomeRequired * factor * 100) / 100;\n\n        var retirementGoal = $('[name=\"retirement_goal\"]', wrapper);\n        retirementGoal.val(goal);\n    });\n\n    $(retirementGoals).on('change', 'select', function() {\n        var value = parseInt($(this).val(), 10);\n\n        var factor = $(':selected', this).data('factor') / 1;\n\n        var wrapper = $(this).closest('.row');\n        var factorElement = $('[name=\"retirement_age_factor\"]', wrapper);\n\n        factorElement.val(factor).trigger('change');\n    });\n\n  });\n}(jQuery));\n","\n(function($){\n  $(function(){\n    var savingsInvestments = $('.retirement-needs-type-savings-investements');\n\n    $(savingsInvestments).on('change', 'input', function() {\n        var wrapper = $(this).closest('.ficheck-section-type');\n\n        var currentValueEmployeeRetirementSavings = (wrapper.find('[name=employee_retirement_savings]').val() || 0) / 1;\n        var currentValuePersonalRetirementSavings = (wrapper.find('[name=personal_retirement_savings]').val() || 0) / 1;\n        var currentValueInvestments = (wrapper.find('[name=investements_value]').val() || 0) / 1;\n        var currentValueSavingsAndInvestmentsElement = wrapper.find('[name=retirement_savings_and_investments]');\n\n        var currentValueSavingsAndInvestments = Math.round((currentValueEmployeeRetirementSavings + currentValuePersonalRetirementSavings + currentValueInvestments) * 100) / 100;\n        currentValueSavingsAndInvestmentsElement.val(currentValueSavingsAndInvestments);\n\n        wrapper.next('.ficheck-section-type').find('[name=\"retirement_years_factor\"]').trigger('change');\n    });\n  });\n}(jQuery));\n"],"sourceRoot":"/source/"}