{"version":3,"sources":["app.js","financial-goals.js","financial-ratios.js","financial-sections.js","monthly-tracking.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["","(function($){\n  $(function(){\n    // store the financialGoalsContainer\n    var financialGoalsContainer = $('.financial-goals');\n\n    // handler for the add tracking record control\n    financialGoalsContainer.on('click', 'a[href=#add]', function(e){\n      var goalWrapper = $(this).closest('.financial-goal-type');\n      var goals = goalWrapper.find('.body').last();\n      var template = goalWrapper.find('.template');\n      var newRecord = template.find('form').clone();\n\n      if(!goals.length) {\n        console.log('no goals for you');\n        goals = $('<div class=\"body\"/>');\n        template.before(goals);\n      }\n\n      newRecord.addClass('new');\n\n      goals.append(newRecord);\n\n      newRecord.find('input:visible').first().trigger('focus');\n\n      $(this).remove();\n\n      return false;\n    });\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    // store the financialGoalsContainer\n    var financialRatiosContainer = $('.financial-ratios');\n\n    $('.ficheck-section-type', financialRatiosContainer).on('change', 'input', function() {\n      var wrapper = $(this).closest('.ficheck-section-type');\n      var asset = wrapper.find('[name=asset]');\n      var liability = wrapper.find('[name=liability]');\n      var ratio = wrapper.find('[name=ratio]');\n      var result;\n\n      if(asset.val() && liability.val()) {\n        if(wrapper.hasClass('financial-ratio-type-basic-liquidity')) {\n          result = asset.val() / liability.val();\n        } else if(wrapper.hasClass('financial-ratio-type-debt-to-asset')) {\n          result = liability.val() / asset.val();\n        } else if(wrapper.hasClass('financial-ratio-type-debt-payment-to-income')) {\n          result = liability.val() / asset.val();\n        }\n      }\n\n      if(result) {\n        result = Math.round(result * 100) / 100;\n        ratio.val(result);\n      }\n    });\n\n  });\n}(jQuery));\n","(function($){\n  $(function(){\n    var ficheckSections = $('.ficheck-sections');\n\n    ficheckSections.on('click', 'a[href=#expand]', function(e){\n      $('.body,[href=#add]', ficheckSections).slideDown();\n\n      return false;\n    });\n\n    ficheckSections.on('click', 'a[href=#collapse]', function(e){\n      $('.body,[href=#add]', ficheckSections).slideUp();\n\n      return false;\n    });\n\n    ficheckSections.on('click', 'h2', function(e){\n      $('.body,[href=#add]', $(this).closest('.ficheck-section-type')).slideToggle();\n\n      return false;\n    });\n\n    var helpControls = $('.help-controls', ficheckSections).on('click', 'a', function(){\n      var ratioElement = $(this).closest('.financial-section-type');\n      var row = $(this).closest('.row');\n      var description = row.find('.description')\n\n      $('.help-controls .hide', row).removeClass('hide');\n      $(this).addClass('hide');\n\n      if($(this).attr('href').search('show')>=0) {\n        description.show();\n      } else {\n        description.hide();\n      }\n\n      return false;\n    });\n  });\n}(jQuery));\n","(function($){\n  // store the monthlyTrackingContainer\n  var monthlyTrackingContainer = $('.monthly-tracking')\n\n  // handler for the add tracking record control\n  // monthlyTrackingContainer.on('click', 'button.add', function(e){\n  //   var currentRecord = $(this).closest('form');\n  //   var newRecord = currentRecord.clone();\n  //\n  //   $(':input', newRecord).val('').removeAttr('disabled').closest('form').removeClass('changed');\n  //\n  //   currentRecord.after(newRecord);\n  //\n  //   newRecord.find('input:visible').first().trigger('focus');\n  //\n  //   return false;\n  // });\n\n  // disable in/out if other if filled in  (only one or the other should be active)\n  monthlyTrackingContainer.on('change', '[name=in],[name=out]', function(){\n    var form = $(this).closest('form');\n\n    var sibling = form.find('[name=in],[name=out]').not(this);\n\n    if($(this).val()) {\n      sibling.attr('disabled', true);\n    } else {\n      sibling.removeAttr('disabled');\n    }\n  }).find('[name=in],[name=out]').trigger('change');\n\n  // if an input changes and the form is valid, submit it via ajax\n  monthlyTrackingContainer.on('change', '.row:not(.new) input', function(){\n    var form = $(this).closest('form');\n\n    var changed = false;\n    $('input', form).each(function(){\n        changed = this.value != this.defaultValue;\n\n        return !changed; // return if at least one control has changed value\n    });\n\n    if(changed) {\n      form.addClass('changed');\n    }\n\n    if(form.hasClass('changed') && form.find('[name=date]').val() && (form.find('[name=in]').val() || form.find('[name=out]').val())) {\n      var form = $(this).closest('form');\n      var data = form.serialize();\n\n      $.ajax({\n        url: form.action,\n        data: data,\n        method: \"post\",\n        success: function() {\n          form.removeClass('changed');\n\n          if(form.hasClass('new')) {\n            form.removeClass('new');\n          }\n        }\n      });\n    }\n  });\n\n  // track the active form (show controls via css)\n  monthlyTrackingContainer.on('focus', 'form input', function() {\n    monthlyTrackingContainer.find('form').removeClass('active');\n\n    $(this).closest('form').addClass('active');\n  });\n}(jQuery));\n"],"sourceRoot":"/source/"}